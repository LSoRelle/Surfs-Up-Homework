# Surfs-Up-Homework
10-Advanced-Data-Storage-and-Retrieval  
%matplotlib inline
from matplotlib import style
style.use('fivethirtyeight')
import matplotlib.pyplot as plt

import numpy as np
import pandas as pd

import datetime as dt
Reflect Tables into SQLAlchemy ORM

# Python SQL toolkit and Object Relational Mapper
import sqlalchemy
from sqlalchemy.ext.automap import automap_base
from sqlalchemy.orm import Session
from sqlalchemy import create_engine, func, inspect

engine = create_engine("sqlite:///hawaii.sqlite")

# reflect an existing database into a new model
Base = automap_base()
# reflect the tables
Base.prepare(engine, reflect=True)

# We can view all of the classes that automap found
Base.classes.keys()
['measurement', 'station']

# Save references to each table
Measurement = Base.classes.measurement
Station = Base.classes.station

# Create our session (link) from Python to the DB
session = Session(engine)

# Get a list of column names and types
inspector = inspect(engine)
columns = inspector.get_columns('measurement')
for c in columns:
    print(c['name'], c["type"])
# Get a list of column names and types
inspector = inspect(engine)
columns = inspector.get_columns('measurement')
for c in columns:
    print(c['name'], c["type"])
id INTEGER
station TEXT
date TEXT
prcp FLOAT
tobs FLOAT

engine.execute('SELECT * FROM measurement LIMIT 10').fetchall()
engine.execute('SELECT * FROM measurement LIMIT 10').fetchall()
[(1, 'USC00519397', '2010-01-01', 0.08, 65.0),
 (2, 'USC00519397', '2010-01-02', 0.0, 63.0),
 (3, 'USC00519397', '2010-01-03', 0.0, 74.0),
 (4, 'USC00519397', '2010-01-04', 0.0, 76.0),
 (5, 'USC00519397', '2010-01-06', None, 73.0),
 (6, 'USC00519397', '2010-01-07', 0.06, 70.0),
 (7, 'USC00519397', '2010-01-08', 0.0, 64.0),
 (8, 'USC00519397', '2010-01-09', 0.0, 68.0),
 (9, 'USC00519397', '2010-01-10', 0.0, 73.0),
 (10, 'USC00519397', '2010-01-11', 0.01, 64.0)]

# Get a list of column names and types
columns = inspector.get_columns('station')
for c in columns:
    print(c['name'], c["type"])
# Get a list of column names and types
columns = inspector.get_columns('station')
for c in columns:
    print(c['name'], c["type"])
id INTEGER
station TEXT
name TEXT
latitude FLOAT
longitude FLOAT
elevation FLOAT

engine.execute('SELECT * FROM station LIMIT 10').fetchall()
engine.execute('SELECT * FROM station LIMIT 10').fetchall()
[(1, 'USC00519397', 'WAIKIKI 717.2, HI US', 21.2716, -157.8168, 3.0),
 (2, 'USC00513117', 'KANEOHE 838.1, HI US', 21.4234, -157.8015, 14.6),
 (3, 'USC00514830', 'KUALOA RANCH HEADQUARTERS 886.9, HI US', 21.5213, -157.8374, 7.0),
 (4, 'USC00517948', 'PEARL CITY, HI US', 21.3934, -157.9751, 11.9),
 (5, 'USC00518838', 'UPPER WAHIAWA 874.3, HI US', 21.4992, -158.0111, 306.6),
 (6, 'USC00519523', 'WAIMANALO EXPERIMENTAL FARM, HI US', 21.33556, -157.71139, 19.5),
 (7, 'USC00519281', 'WAIHEE 837.5, HI US', 21.45167, -157.84888999999998, 32.9),
 (8, 'USC00511918', 'HONOLULU OBSERVATORY 702.2, HI US', 21.3152, -157.9992, 0.9),
 (9, 'USC00516128', 'MANOA LYON ARBO 785.2, HI US', 21.3331, -157.8025, 152.4)]
Exploratory Climate Analysis

# Design a query to retrieve the last 12 months of precipitation data and plot the results
# Find the last date in the data
last_date = session.query(Measurement.date).order_by(Measurement.date.desc()).first()
print(last_date)
# Design a query to retrieve the last 12 months of precipitation data and plot the results
# Find the last date in the data
last_date = session.query(Measurement.date).order_by(Measurement.date.desc()).first()
print(last_date)
('2017-08-23',)

# Calculate the date 1 year ago from the last data point in the database
one_year_ago = dt.date(2017,8,23) - dt.timedelta(days=365)
print(one_year_ago)
# Calculate the date 1 year ago from the last data point in the database
one_year_ago = dt.date(2017,8,23) - dt.timedelta(days=365)
print(one_year_ago)
2016-08-23

# Perform a query to retrieve the data and precipitation scores
yr_precip = session.query(Measurement.date, Measurement.prcp).\
        filter(Measurement.date >= '2016-08-24', Measurement.date <= '2017-08-23').\
        order_by(Measurement.date).all()
yr_precip
# Perform a query to retrieve the data and precipitation scores
yr_precip = session.query(Measurement.date, Measurement.prcp).\
        filter(Measurement.date >= '2016-08-24', Measurement.date <= '2017-08-23').\
        order_by(Measurement.date).all()
yr_precip
[('2016-08-24', 0.08),
 ('2016-08-24', 2.15),
 ('2016-08-24', 2.28),
 ('2016-08-24', None),
 ('2016-08-24', 1.22),
 ('2016-08-24', 2.15),
 ('2016-08-24', 1.45),
 ('2016-08-25', 0.08),
 ('2016-08-25', 0.08),
 ('2016-08-25', 0.0),
 ('2016-08-25', 0.0),
 ('2016-08-25', 0.21),
 ('2016-08-25', 0.06),
 ('2016-08-25', 0.11),
 ('2016-08-26', 0.0),
 ('2016-08-26', 0.03),
 ('2016-08-26', 0.02),
 ('2016-08-26', 0.04),
 ('2016-08-26', 0.0),
 ('2016-08-26', 0.01),
 ('2016-08-27', 0.0),
 ('2016-08-27', 0.18),
 ('2016-08-27', 0.02),
 ('2016-08-27', 0.0),
 ('2016-08-27', 0.12),
 ('2016-08-27', None),
 ('2016-08-28', 0.01),
 ('2016-08-28', 0.14),
 ('2016-08-28', 0.14),
 ('2016-08-28', 0.14),
 ('2016-08-28', 0.6),
 ('2016-08-28', 2.07),
 ('2016-08-29', 0.0),
 ('2016-08-29', 0.17),
 ('2016-08-29', 0.04),
 ('2016-08-29', None),
 ('2016-08-29', 0.0),
 ('2016-08-29', 0.35),
 ('2016-08-29', 0.9),
 ('2016-08-30', 0.0),
 ('2016-08-30', 0.0),
 ('2016-08-30', 0.02),
 ('2016-08-30', 0.0),
 ('2016-08-30', 0.0),
 ('2016-08-30', 0.05),
 ('2016-08-31', 0.13),
 ('2016-08-31', 0.1),
 ('2016-08-31', None),
 ('2016-08-31', None),
 ('2016-08-31', 0.25),
 ('2016-08-31', 0.24),
 ('2016-08-31', 2.46),
 ('2016-09-01', 0.0),
 ('2016-09-01', 0.0),
 ('2016-09-01', 0.0),
 ('2016-09-01', None),
 ('2016-09-01', 0.02),
 ('2016-09-01', 0.01),
 ('2016-09-02', 0.0),
 ('2016-09-02', 0.02),
 ('2016-09-02', 0.19),
 ('2016-09-02', None),
 ('2016-09-02', None),
 ('2016-09-02', 0.01),
 ('2016-09-02', 0.03),
 ('2016-09-03', 0.0),
 ('2016-09-03', 0.07),
 ('2016-09-03', 0.08),
 ('2016-09-03', 0.12),
 ('2016-09-03', 1.0),
 ('2016-09-04', 0.03),
 ('2016-09-04', 0.03),
 ('2016-09-04', 0.74),
 ('2016-09-04', 0.14),
 ('2016-09-04', 0.44),
 ('2016-09-05', None),
 ('2016-09-05', 0.11),
 ('2016-09-05', None),
 ('2016-09-05', 0.02),
 ('2016-09-05', 0.03),
 ('2016-09-05', 0.18),
 ('2016-09-06', None),
 ('2016-09-06', 0.05),
 ('2016-09-06', 0.04),
 ('2016-09-06', 0.03),
 ('2016-09-06', 0.11),
 ('2016-09-06', 1.0),
 ('2016-09-07', 0.05),
 ('2016-09-07', 0.1),
 ('2016-09-07', 0.23),
 ('2016-09-07', 0.11),
 ('2016-09-07', 0.16),
 ('2016-09-07', 1.35),
 ('2016-09-08', 0.0),
 ('2016-09-08', 0.22),
 ('2016-09-08', 0.01),
 ('2016-09-08', None),
 ('2016-09-08', 0.01),
 ('2016-09-08', 0.07),
 ('2016-09-08', 0.15),
 ('2016-09-09', 0.03),
 ('2016-09-09', 0.01),
 ('2016-09-09', 0.29),
 ('2016-09-09', None),
 ('2016-09-09', 0.23),
 ('2016-09-09', 0.16),
 ('2016-09-09', 0.35),
 ('2016-09-10', 0.0),
 ('2016-09-10', 0.01),
 ('2016-09-10', 0.14),
 ('2016-09-10', 0.09),
 ('2016-09-10', 1.16),
 ('2016-09-11', 0.05),
 ('2016-09-11', 0.18),
 ('2016-09-11', 0.12),
 ('2016-09-11', 0.3),
 ('2016-09-11', 0.6),
 ('2016-09-12', 0.0),
 ('2016-09-12', 0.04),
 ('2016-09-12', None),
 ('2016-09-12', None),
 ('2016-09-12', 0.15),
 ('2016-09-12', 0.31),
 ('2016-09-12', 1.04),
 ('2016-09-13', 0.02),
 ('2016-09-13', 0.37),
 ('2016-09-13', 0.32),
 ('2016-09-13', None),
 ('2016-09-13', 0.46),
 ('2016-09-13', 0.34),
 ('2016-09-13', 1.2),
 ('2016-09-14', 1.32),
 ('2016-09-14', 0.9),
 ('2016-09-14', 1.84),
 ('2016-09-14', None),
 ('2016-09-14', 1.19),
 ('2016-09-14', 2.33),
 ('2016-09-14', 6.7),
 ('2016-09-15', 0.42),
 ('2016-09-15', 0.12),
 ('2016-09-15', 0.07),
 ('2016-09-15', None),
 ('2016-09-15', 0.17),
 ('2016-09-15', 0.83),
 ('2016-09-15', 3.35),
 ('2016-09-16', 0.06),
 ('2016-09-16', 0.01),
 ('2016-09-16', 0.07),
 ('2016-09-16', 0.0),
 ('2016-09-16', 0.01),
 ('2016-09-16', 0.06),
 ('2016-09-16', 0.61),
 ('2016-09-17', 0.05),
 ('2016-09-17', 0.04),
 ('2016-09-17', 0.0),
 ('2016-09-17', 0.36),
 ('2016-09-17', 0.23),
 ('2016-09-18', 0.0),
 ('2016-09-18', 0.0),
 ('2016-09-18', 0.04),
 ('2016-09-18', 0.07),
 ('2016-09-18', 0.42),
 ('2016-09-19', 0.0),
 ('2016-09-19', 0.01),
 ('2016-09-19', None),
 ('2016-09-19', None),
 ('2016-09-19', 0.05),
 ('2016-09-19', 0.01),
 ('2016-09-19', 0.25),
 ('2016-09-20', 0.0),
 ('2016-09-20', 0.09),
 ('2016-09-20', 0.25),
 ('2016-09-20', 0.0),
 ('2016-09-20', 0.04),
 ('2016-09-20', 0.22),
 ('2016-09-20', 0.43),
 ('2016-09-21', 0.0),
 ('2016-09-21', 0.06),
 ('2016-09-21', 0.02),
 ('2016-09-21', 0.0),
 ('2016-09-21', 0.07),
 ('2016-09-21', 1.02),
 ('2016-09-22', 0.02),
 ('2016-09-22', 0.09),
 ('2016-09-22', 0.17),
 ('2016-09-22', 0.06),
 ('2016-09-22', 0.01),
 ('2016-09-22', 0.34),
 ('2016-09-22', 0.75),
 ('2016-09-23', 0.0),
 ('2016-09-23', 0.15),
 ('2016-09-23', 0.15),
 ('2016-09-23', 0.0),
 ('2016-09-23', 0.0),
 ('2016-09-23', 0.94),
 ('2016-09-23', 0.33),
 ('2016-09-24', 0.0),
 ('2016-09-24', 0.0),
 ('2016-09-24', 0.0),
 ('2016-09-24', 0.0),
 ('2016-09-24', 0.01),
 ('2016-09-24', 0.27),
 ('2016-09-25', 0.0),
 ('2016-09-25', 0.02),
 ('2016-09-25', 0.0),
 ('2016-09-25', 0.0),
 ('2016-09-25', 0.03),
 ('2016-09-25', 0.04),
 ('2016-09-26', 0.06),
 ('2016-09-26', 0.06),
 ('2016-09-26', 0.02),
 ('2016-09-26', None),
 ('2016-09-26', 0.34),
 ('2016-09-26', 0.17),
 ('2016-09-26', 1.02),
 ('2016-09-27', 0.02),
 ('2016-09-27', 0.12),
 ('2016-09-27', 0.0),
 ('2016-09-27', 0.05),
 ('2016-09-27', 0.17),
 ('2016-09-27', 1.0),
 ('2016-09-28', 0.0),
 ('2016-09-28', 0.08),
 ('2016-09-28', 0.0),
 ('2016-09-28', 0.0),
 ('2016-09-28', 0.0),
 ('2016-09-28', 0.0),
 ('2016-09-28', 0.05),
 ('2016-09-29', 0.0),
 ('2016-09-29', 0.49),
 ('2016-09-29', 0.2),
 ('2016-09-29', 0.04),
 ('2016-09-29', 0.18),
 ('2016-09-29', 0.59),
 ('2016-09-29', 1.49),
 ('2016-09-30', 0.0),
 ('2016-09-30', 0.31),
 ('2016-09-30', 0.06),
 ('2016-09-30', None),
 ('2016-09-30', 0.15),
 ('2016-09-30', 0.25),
 ('2016-09-30', 0.38),
 ('2016-10-01', 0.0),
 ('2016-10-01', 0.14),
 ('2016-10-01', 0.08),
 ('2016-10-01', 0.07),
 ('2016-10-01', 0.14),
 ('2016-10-01', 1.02),
 ('2016-10-02', 0.0),
 ('2016-10-02', 0.02),
 ('2016-10-02', 0.03),
 ('2016-10-02', 0.0),
 ('2016-10-02', 0.06),
 ('2016-10-02', 0.61),
 ('2016-10-03', 0.0),
 ('2016-10-03', 0.04),
 ('2016-10-03', 0.03),
 ('2016-10-03', None),
 ('2016-10-03', 0.0),
 ('2016-10-03', 0.16),
 ('2016-10-03', 0.46),
 ('2016-10-04', 0.0),
 ('2016-10-04', 0.0),
 ('2016-10-04', 0.0),
 ('2016-10-04', None),
 ('2016-10-04', 0.0),
 ('2016-10-04', 0.03),
 ('2016-10-04', 3.46),
 ('2016-10-05', 0.0),
 ('2016-10-05', 0.0),
 ('2016-10-05', 0.0),
 ('2016-10-05', None),
 ('2016-10-05', 0.0),
 ('2016-10-05', 0.01),
 ('2016-10-05', 0.81),
 ('2016-10-06', 0.0),
 ('2016-10-06', 0.05),
 ('2016-10-06', 0.0),
 ('2016-10-06', 0.07),
 ('2016-10-06', 0.0),
 ('2016-10-06', 0.0),
 ('2016-10-06', 0.04),
 ('2016-10-07', 0.0),
 ('2016-10-07', 0.0),
 ('2016-10-07', 0.0),
 ('2016-10-07', None),
 ('2016-10-07', 0.0),
 ('2016-10-07', 0.0),
 ('2016-10-07', 0.01),
 ('2016-10-08', 0.0),
 ('2016-10-08', 0.0),
 ('2016-10-08', 0.0),
 ('2016-10-08', 0.0),
 ('2016-10-08', 0.04),
 ('2016-10-09', 0.0),
 ('2016-10-09', 0.0),
 ('2016-10-09', 0.0),
 ('2016-10-09', 0.0),
 ('2016-10-09', 0.0),
 ('2016-10-10', 0.0),
 ('2016-10-10', 0.0),
 ('2016-10-10', None),
 ('2016-10-10', 0.0),
 ('2016-10-10', 0.0),
 ('2016-10-10', 0.0),
 ('2016-10-11', 0.0),
 ('2016-10-11', 0.02),
 ('2016-10-11', 0.04),
 ('2016-10-11', None),
 ('2016-10-11', 0.0),
 ('2016-10-11', 0.28),
 ('2016-10-11', 0.35),
 ('2016-10-12', 0.0),
 ('2016-10-12', 0.03),
 ('2016-10-12', 0.0),
 ('2016-10-12', 0.0),
 ('2016-10-12', 0.03),
 ('2016-10-12', 0.02),
 ('2016-10-13', 0.0),
 ('2016-10-13', 0.0),
 ('2016-10-13', 0.02),
 ('2016-10-13', None),
 ('2016-10-13', 0.0),
 ('2016-10-13', 0.0),
 ('2016-10-13', 0.06),
 ('2016-10-14', 0.0),
 ('2016-10-14', 0.0),
 ('2016-10-14', 0.0),
 ('2016-10-14', 0.0),
 ('2016-10-14', 0.0),
 ('2016-10-14', 0.0),
 ('2016-10-15', 0.0),
 ('2016-10-15', 0.0),
 ('2016-10-15', 0.02),
 ('2016-10-15', 0.0),
 ('2016-10-15', 0.04),
 ('2016-10-15', 0.33),
 ('2016-10-16', 0.0),
 ('2016-10-16', 0.0),
 ('2016-10-16', 0.0),
 ('2016-10-16', 0.0),
 ('2016-10-16', 0.0),
 ('2016-10-17', 0.01),
 ('2016-10-17', 0.03),
 ('2016-10-17', None),
 ('2016-10-17', None),
 ('2016-10-17', 0.12),
 ('2016-10-17', 0.01),
 ('2016-10-17', 0.38),
 ('2016-10-18', 0.0),
 ('2016-10-18', 0.05),
 ('2016-10-18', 0.03),
 ('2016-10-18', None),
 ('2016-10-18', 0.02),
 ('2016-10-18', 0.02),
 ('2016-10-18', 0.48),
 ('2016-10-19', 0.0),
 ('2016-10-19', 0.06),
 ('2016-10-19', 0.0),
 ('2016-10-19', None),
 ('2016-10-19', 0.0),
 ('2016-10-19', 0.11),
 ('2016-10-19', 0.0),
 ('2016-10-20', 0.0),
 ('2016-10-20', 0.0),
 ('2016-10-20', 0.01),
 ('2016-10-20', None),
 ('2016-10-20', 0.0),
 ('2016-10-20', 1.0),
 ('2016-10-21', 0.05),
 ('2016-10-21', 0.15),
 ('2016-10-21', 0.03),
 ('2016-10-21', None),
 ('2016-10-21', None),
 ('2016-10-21', 0.0),
 ('2016-10-21', 0.09),
 ('2016-10-22', 0.15),
 ('2016-10-22', 0.1),
 ('2016-10-22', 0.0),
 ('2016-10-22', 0.15),
 ('2016-10-22', 1.37),
 ('2016-10-23', 0.01),
 ('2016-10-23', 0.01),
 ('2016-10-23', None),
 ('2016-10-23', 0.0),
 ('2016-10-23', 0.02),
 ('2016-10-23', 0.24),
 ('2016-10-24', 0.0),
 ('2016-10-24', 0.0),
 ('2016-10-24', 0.01),
 ('2016-10-24', None),
 ('2016-10-24', 0.0),
 ('2016-10-24', 0.08),
 ('2016-10-24', 0.7),
 ('2016-10-25', 0.03),
 ('2016-10-25', 0.04),
 ('2016-10-25', 0.0),
 ('2016-10-25', 0.4),
 ('2016-10-25', 0.12),
 ('2016-10-25', 0.11),
 ('2016-10-25', 0.4),
 ('2016-10-26', 0.0),
 ('2016-10-26', 0.06),
 ('2016-10-26', 0.2),
 ('2016-10-26', 0.02),
 ('2016-10-26', 0.01),
 ('2016-10-26', 0.0),
 ('2016-10-27', 0.0),
 ('2016-10-27', 0.11),
 ('2016-10-27', 0.2),
 ('2016-10-27', None),
 ('2016-10-27', 0.08),
 ('2016-10-27', 0.22),
 ('2016-10-27', 1.25),
 ('2016-10-28', 0.0),
 ('2016-10-28', 0.02),
 ('2016-10-28', 0.07),
 ('2016-10-28', None),
 ('2016-10-28', 0.06),
 ('2016-10-28', 0.05),
 ('2016-10-28', 0.37),
 ('2016-10-29', 0.0),
 ('2016-10-29', 0.02),
 ('2016-10-29', 0.26),
 ('2016-10-29', 0.01),
 ('2016-10-29', 0.1),
 ('2016-10-29', 0.25),
 ('2016-10-30', 0.24),
 ('2016-10-30', 0.1),
 ('2016-10-30', 0.14),
 ('2016-10-30', 0.0),
 ('2016-10-30', 0.16),
 ('2016-10-30', 0.95),
 ('2016-10-31', 0.03),
 ('2016-10-31', 0.03),
 ('2016-10-31', 0.0),
 ('2016-10-31', None),
 ('2016-10-31', 0.13),
 ('2016-10-31', 0.07),
 ('2016-10-31', 1.35),
 ('2016-11-01', 0.0),
 ('2016-11-01', 0.01),
 ('2016-11-01', 0.0),
 ('2016-11-01', 0.01),
 ('2016-11-01', 0.1),
 ('2016-11-01', 0.09),
 ('2016-11-02', 0.0),
 ('2016-11-02', 0.0),
 ('2016-11-02', 0.0),
 ('2016-11-02', 0.0),
 ('2016-11-02', 0.0),
 ('2016-11-02', 0.04),
 ('2016-11-03', 0.0),
 ('2016-11-03', 0.0),
 ('2016-11-03', 0.0),
 ('2016-11-03', 0.0),
 ('2016-11-03', 0.0),
 ('2016-11-03', 0.02),
 ('2016-11-04', 0.0),
 ('2016-11-04', 0.0),
 ('2016-11-04', 0.0),
 ('2016-11-04', None),
 ('2016-11-04', 0.0),
 ('2016-11-04', 0.0),
 ('2016-11-04', 0.06),
 ('2016-11-05', 0.0),
 ('2016-11-05', 0.02),
 ('2016-11-05', 0.0),
 ('2016-11-05', 0.02),
 ('2016-11-05', 0.03),
 ('2016-11-05', 0.38),
 ('2016-11-06', 0.0),
 ('2016-11-06', 0.02),
 ('2016-11-06', 0.0),
 ('2016-11-06', 0.0),
 ('2016-11-06', 0.01),
 ('2016-11-06', 0.05),
 ('2016-11-07', 0.0),
 ('2016-11-07', 0.0),
 ('2016-11-07', 0.13),
 ('2016-11-07', None),
 ('2016-11-07', 0.0),
 ('2016-11-07', 0.0),
 ('2016-11-07', 0.05),
 ('2016-11-08', 0.07),
 ('2016-11-08', 0.14),
 ('2016-11-08', 0.02),
 ('2016-11-08', 0.15),
 ('2016-11-08', 0.21),
 ('2016-11-08', 0.53),
 ('2016-11-09', 0.0),
 ('2016-11-09', 0.08),
 ('2016-11-09', 0.17),
 ('2016-11-09', 0.0),
 ('2016-11-09', 0.0),
 ('2016-11-09', 0.11),
 ('2016-11-09', 0.04),
 ('2016-11-10', 0.0),
 ('2016-11-10', 0.0),
 ('2016-11-10', 0.0),
 ('2016-11-10', 0.0),
 ('2016-11-10', 0.0),
 ('2016-11-10', 0.01),
 ('2016-11-11', 0.0),
 ('2016-11-11', 0.0),
 ('2016-11-11', 0.0),
 ('2016-11-11', 0.0),
 ('2016-11-11', 0.0),
 ('2016-11-11', 0.0),
 ('2016-11-12', 0.0),
 ('2016-11-12', 0.0),
 ('2016-11-12', 0.0),
 ('2016-11-12', 0.0),
 ('2016-11-12', 0.0),
 ('2016-11-12', 0.0),
 ('2016-11-13', 0.0),
 ('2016-11-13', 0.0),
 ('2016-11-13', 0.0),
 ('2016-11-13', 0.0),
 ('2016-11-13', 0.0),
 ('2016-11-13', 0.0),
 ('2016-11-14', 0.0),
 ('2016-11-14', 0.06),
 ('2016-11-14', 0.05),
 ('2016-11-14', 0.02),
 ('2016-11-14', 0.0),
 ('2016-11-14', 0.0),
 ('2016-11-14', 0.02),
 ('2016-11-15', 0.0),
 ('2016-11-15', 0.0),
 ('2016-11-15', 0.0),
 ('2016-11-15', None),
 ('2016-11-15', 0.0),
 ('2016-11-15', 0.0),
 ('2016-11-15', 0.05),
 ('2016-11-16', 0.0),
 ('2016-11-16', 0.14),
 ('2016-11-16', 0.18),
 ('2016-11-16', None),
 ('2016-11-16', 0.07),
 ('2016-11-16', 0.24),
 ('2016-11-16', 0.91),
 ('2016-11-17', 0.0),
 ('2016-11-17', 0.03),
 ('2016-11-17', 0.0),
 ('2016-11-17', None),
 ('2016-11-17', 0.0),
 ('2016-11-17', 0.01),
 ('2016-11-17', 0.02),
 ('2016-11-18', 0.0),
 ('2016-11-18', 0.01),
 ('2016-11-18', None),
 ('2016-11-18', 0.02),
 ('2016-11-18', 0.0),
 ('2016-11-19', 0.03),
 ('2016-11-19', 0.11),
 ('2016-11-19', 0.13),
 ('2016-11-19', 0.11),
 ('2016-11-20', 0.05),
 ('2016-11-20', 0.11),
 ('2016-11-20', 0.4),
 ('2016-11-20', 0.39),
 ('2016-11-20', None),
 ('2016-11-21', 0.01),
 ('2016-11-21', 0.02),
 ('2016-11-21', None),
 ('2016-11-21', 0.07),
 ('2016-11-21', 0.11),
 ('2016-11-21', 2.87),
 ('2016-11-22', 0.13),
 ('2016-11-22', 0.41),
 ('2016-11-22', None),
 ('2016-11-22', None),
 ('2016-11-22', 0.31),
 ('2016-11-22', 2.05),
 ('2016-11-22', 2.11),
 ('2016-11-23', 0.14),
 ('2016-11-23', 0.03),
 ('2016-11-23', None),
 ('2016-11-23', 0.03),
 ('2016-11-23', 0.25),
 ('2016-11-23', 0.22),
 ('2016-11-24', 0.05),
 ('2016-11-24', 0.2),
 ('2016-11-24', 0.21),
 ('2016-11-24', 0.3),
 ('2016-11-24', 0.72),
 ('2016-11-25', 0.05),
 ('2016-11-25', 0.05),
 ('2016-11-25', None),
 ('2016-11-25', 0.11),
 ('2016-11-25', 0.08),
 ('2016-11-25', 1.03),
 ('2016-11-26', 0.05),
 ('2016-11-26', 0.05),
 ('2016-11-26', 0.02),
 ('2016-11-26', 0.03),
 ('2016-11-26', 0.06),
 ('2016-11-26', 0.3),
 ('2016-11-27', 0.0),
 ('2016-11-27', 0.06),
 ('2016-11-27', 0.03),
 ('2016-11-27', 0.0),
 ('2016-11-27', 0.17),
 ('2016-11-27', 0.29),
 ('2016-11-28', 0.01),
 ('2016-11-28', 0.02),
 ('2016-11-28', 0.0),
 ('2016-11-28', None),
 ('2016-11-28', 0.0),
 ('2016-11-28', 0.0),
 ('2016-11-28', 0.69),
 ('2016-11-29', 0.0),
 ('2016-11-29', 0.04),
 ('2016-11-29', 0.04),
 ('2016-11-29', None),
 ('2016-11-29', 0.06),
 ('2016-11-29', 0.09),
 ('2016-11-29', 0.2),
 ('2016-11-30', 0.14),
 ('2016-11-30', 0.05),
 ('2016-11-30', 0.03),
 ('2016-11-30', None),
 ('2016-11-30', 0.0),
 ('2016-11-30', 0.05),
 ('2016-11-30', 0.79),
 ('2016-12-01', 0.12),
 ('2016-12-01', 0.33),
 ('2016-12-01', 0.07),
 ('2016-12-01', None),
 ('2016-12-01', 0.16),
 ('2016-12-01', 0.37),
 ('2016-12-01', 0.72),
 ('2016-12-02', 0.03),
 ('2016-12-02', 0.3),
 ('2016-12-02', 0.4),
 ('2016-12-02', None),
 ('2016-12-02', 0.01),
 ('2016-12-02', 0.35),
 ('2016-12-02', 1.27),
 ('2016-12-03', 0.0),
 ('2016-12-03', 0.04),
 ('2016-12-03', 0.26),
 ('2016-12-03', 0.02),
 ('2016-12-03', 0.77),
 ('2016-12-03', 1.62),
 ('2016-12-04', 0.03),
 ('2016-12-04', 0.1),
 ('2016-12-04', 0.0),
 ('2016-12-04', 0.32),
 ('2016-12-04', 0.04),
 ('2016-12-04', 0.31),
 ('2016-12-05', 0.43),
 ('2016-12-05', 0.34),
 ('2016-12-05', 0.2),
 ('2016-12-05', None),
 ('2016-12-05', 0.45),
 ('2016-12-05', 0.22),
 ('2016-12-05', 1.6),
 ('2016-12-06', 0.02),
 ('2016-12-06', 0.02),
 ('2016-12-06', None),
 ('2016-12-06', 0.0),
 ('2016-12-06', 0.0),
 ('2016-12-06', 0.0),
 ('2016-12-07', 0.0),
 ('2016-12-07', 0.17),
 ('2016-12-07', None),
 ('2016-12-07', None),
 ('2016-12-07', 0.07),
 ('2016-12-07', 0.12),
 ('2016-12-07', 0.02),
 ('2016-12-08', 0.03),
 ('2016-12-08', 0.03),
 ('2016-12-08', 0.02),
 ('2016-12-08', 0.27),
 ('2016-12-08', 0.01),
 ('2016-12-08', 0.07),
 ('2016-12-08', 0.03),
 ('2016-12-09', 0.52),
 ('2016-12-09', 0.34),
 ('2016-12-09', 0.26),
 ('2016-12-09', None),
 ('2016-12-09', 0.31),
 ('2016-12-09', 0.42),
 ('2016-12-10', 0.05),
 ('2016-12-10', 0.02),
 ('2016-12-10', 0.0),
 ('2016-12-10', None),
 ('2016-12-10', 0.02),
 ('2016-12-10', 0.04),
 ('2016-12-11', 0.04),
 ('2016-12-11', 0.02),
 ('2016-12-11', 0.06),
 ('2016-12-11', 0.0),
 ('2016-12-11', 0.13),
 ('2016-12-12', 0.01),
 ('2016-12-12', 0.01),
 ('2016-12-12', None),
 ('2016-12-12', 0.02),
 ('2016-12-12', 0.0),
 ('2016-12-12', 0.0),
 ('2016-12-12', 0.01),
 ('2016-12-13', 0.05),
 ('2016-12-13', 0.1),
 ('2016-12-13', 0.34),
 ('2016-12-13', None),
 ('2016-12-13', 0.15),
 ('2016-12-13', 0.04),
 ('2016-12-13', 0.09),
 ('2016-12-14', 0.03),
 ('2016-12-14', 0.05),
 ('2016-12-14', 0.12),
 ('2016-12-14', None),
 ('2016-12-14', 0.05),
 ('2016-12-14', 0.92),
 ('2016-12-14', 0.33),
 ('2016-12-15', 0.0),
 ('2016-12-15', 0.02),
 ('2016-12-15', 0.07),
 ('2016-12-15', None),
 ('2016-12-15', 0.0),
 ('2016-12-15', 0.14),
 ('2016-12-15', 0.03),
 ('2016-12-16', 0.0),
 ('2016-12-16', 0.01),
 ('2016-12-16', 0.0),
 ('2016-12-16', None),
 ('2016-12-16', 0.0),
 ('2016-12-16', 0.03),
 ('2016-12-16', 0.0),
 ('2016-12-17', 0.01),
 ('2016-12-17', 0.11),
 ('2016-12-17', 0.0),
 ('2016-12-17', 0.16),
 ('2016-12-17', 0.07),
 ('2016-12-18', 0.13),
 ('2016-12-18', 0.29),
 ('2016-12-18', 0.04),
 ('2016-12-18', 0.27),
 ('2016-12-18', 0.16),
 ('2016-12-18', None),
 ('2016-12-19', 0.01),
 ('2016-12-19', 0.21),
 ('2016-12-19', 0.0),
 ('2016-12-19', None),
 ('2016-12-19', 0.02),
 ('2016-12-19', 0.03),
 ('2016-12-19', 0.15),
 ('2016-12-20', 0.0),
 ('2016-12-20', 0.02),
 ('2016-12-20', 0.0),
 ('2016-12-20', None),
 ('2016-12-20', 0.01),
 ('2016-12-20', 0.0),
 ('2016-12-20', 0.0),
 ('2016-12-21', 0.0),
 ('2016-12-21', 0.03),
 ('2016-12-21', 0.09),
 ('2016-12-21', 0.06),
 ('2016-12-21', 0.06),
 ('2016-12-21', 0.11),
 ('2016-12-21', 0.55),
 ('2016-12-22', 0.01),
 ('2016-12-22', 0.17),
 ('2016-12-22', 0.05),
 ('2016-12-22', None),
 ('2016-12-22', 0.14),
 ('2016-12-22', 0.86),
 ('2016-12-22', 1.24),
 ('2016-12-23', 0.01),
 ('2016-12-23', 0.1),
 ('2016-12-23', 0.03),
 ('2016-12-23', None),
 ('2016-12-23', 0.02),
 ('2016-12-23', 0.24),
 ('2016-12-23', 0.83),
 ('2016-12-24', 0.01),
 ('2016-12-24', 0.14),
 ('2016-12-24', 0.13),
 ('2016-12-24', 0.06),
 ('2016-12-24', 0.2),
 ('2016-12-24', 1.08),
 ('2016-12-25', 0.0),
 ('2016-12-25', 0.03),
 ('2016-12-25', 0.0),
 ('2016-12-25', 0.02),
 ('2016-12-25', 0.38),
 ('2016-12-26', 0.02),
 ('2016-12-26', 0.26),
 ('2016-12-26', None),
 ('2016-12-26', 0.06),
 ('2016-12-26', 0.22),
 ('2016-12-26', 1.48),
 ('2016-12-27', 0.0),
 ('2016-12-27', 0.03),
 ('2016-12-27', 0.02),
 ('2016-12-27', 0.0),
 ('2016-12-27', 0.05),
 ('2016-12-27', 0.14),
 ('2016-12-28', 0.02),
 ('2016-12-28', 0.09),
 ('2016-12-28', 0.01),
 ('2016-12-28', None),
 ('2016-12-28', 0.06),
 ('2016-12-28', 0.09),
 ('2016-12-28', 0.14),
 ('2016-12-29', 0.04),
 ('2016-12-29', 0.18),
 ('2016-12-29', 0.56),
 ('2016-12-29', None),
 ('2016-12-29', 0.05),
 ('2016-12-29', 0.52),
 ('2016-12-29', 1.03),
 ('2016-12-30', 0.12),
 ('2016-12-30', 0.21),
 ('2016-12-30', 0.29),
 ('2016-12-30', None),
 ('2016-12-30', 0.07),
 ('2016-12-30', 0.29),
 ('2016-12-30', 2.37),
 ('2016-12-31', 0.01),
 ('2016-12-31', 0.62),
 ('2016-12-31', 0.36),
 ('2016-12-31', 0.25),
 ('2016-12-31', 0.9),
 ('2017-01-01', 0.0),
 ('2017-01-01', 0.29),
 ('2017-01-01', 0.0),
 ('2017-01-01', None),
 ('2017-01-01', 0.03),
 ('2017-01-01', 0.03),
 ('2017-01-02', 0.0),
 ('2017-01-02', 0.0),
 ('2017-01-02', 0.01),
 ('2017-01-02', 0.01),
 ('2017-01-02', 0.0),
 ('2017-01-03', 0.0),
 ('2017-01-03', 0.0),
 ('2017-01-03', 0.0),
 ('2017-01-03', None),
 ('2017-01-03', 0.0),
 ('2017-01-03', 0.0),
 ('2017-01-04', 0.0),
 ('2017-01-04', 0.0),
 ('2017-01-04', 0.0),
 ('2017-01-04', 0.18),
 ('2017-01-04', 0.0),
 ('2017-01-04', 0.0),
 ('2017-01-05', 0.0),
 ('2017-01-05', 0.0),
 ('2017-01-05', 0.0),
 ('2017-01-05', 0.42),
 ('2017-01-05', 0.06),
 ('2017-01-05', 0.47),
 ('2017-01-06', 0.0),
 ('2017-01-06', 0.0),
 ('2017-01-06', 0.59),
 ('2017-01-06', 0.01),
 ('2017-01-06', 0.1),
 ('2017-01-06', 0.1),
 ('2017-01-07', 0.0),
 ('2017-01-07', 0.06),
 ('2017-01-07', 0.0),
 ('2017-01-07', 0.0),
 ('2017-01-07', 0.0),
 ('2017-01-07', 0.0),
 ('2017-01-08', 0.0),
 ('2017-01-08', 0.0),
 ('2017-01-08', 0.03),
 ('2017-01-08', 0.0),
 ('2017-01-08', 0.0),
 ('2017-01-08', 0.03),
 ('2017-01-09', 0.0),
 ('2017-01-09', 0.0),
 ('2017-01-09', 0.0),
 ('2017-01-09', None),
 ('2017-01-09', 0.0),
 ('2017-01-09', 0.0),
 ('2017-01-09', 0.0),
 ('2017-01-10', 0.0),
 ('2017-01-10', 0.0),
 ('2017-01-10', 0.0),
 ('2017-01-10', None),
 ('2017-01-10', 0.0),
 ('2017-01-10', 0.0),
 ('2017-01-10', 0.0),
 ('2017-01-11', 0.0),
 ('2017-01-11', 0.0),
 ('2017-01-11', 0.0),
 ('2017-01-11', None),
 ('2017-01-11', 0.0),
 ('2017-01-11', 0.0),
 ('2017-01-12', 0.0),
 ('2017-01-12', 0.0),
 ('2017-01-12', None),
 ('2017-01-12', None),
 ('2017-01-12', 0.0),
 ('2017-01-12', 0.0),
 ('2017-01-13', 0.0),
 ('2017-01-13', 0.0),
 ('2017-01-13', None),
 ('2017-01-13', None),
 ('2017-01-13', 0.0),
 ('2017-01-13', 0.0),
 ('2017-01-14', 0.0),
 ('2017-01-14', 0.0),
 ('2017-01-14', 0.0),
 ('2017-01-14', 0.01),
 ('2017-01-14', 0.0),
 ('2017-01-15', 0.0),
 ('2017-01-15', 0.0),
 ('2017-01-15', None),
 ('2017-01-15', 0.0),
 ('2017-01-15', 0.01),
 ('2017-01-16', 0.0),
 ('2017-01-16', 0.0),
 ('2017-01-16', None),
 ('2017-01-16', 0.0),
 ('2017-01-16', 0.0),
 ('2017-01-16', 0.0),
 ('2017-01-17', 0.0),
 ('2017-01-17', 0.0),
 ('2017-01-17', 0.0),
 ('2017-01-17', 0.0),
 ('2017-01-17', 0.0),
 ('2017-01-17', 0.0),
 ('2017-01-18', 0.0),
 ('2017-01-18', 0.0),
 ('2017-01-18', 0.0),
 ('2017-01-18', 0.0),
 ('2017-01-18', None),
 ('2017-01-18', 0.0),
 ('2017-01-18', 0.07),
 ('2017-01-19', 0.0),
 ('2017-01-19', 0.0),
 ('2017-01-19', 0.0),
 ('2017-01-19', None),
 ('2017-01-19', 0.0),
 ('2017-01-19', 0.02),
 ('2017-01-19', 0.0),
 ('2017-01-20', 0.0),
 ('2017-01-20', 0.0),
 ('2017-01-20', 0.0),
 ('2017-01-20', None),
 ('2017-01-20', 0.0),
 ('2017-01-20', 0.0),
 ('2017-01-20', 0.0),
 ('2017-01-21', 0.0),
 ('2017-01-21', 0.04),
 ('2017-01-21', 0.02),
 ('2017-01-21', 0.11),
 ('2017-01-21', 0.03),
 ('2017-01-21', 0.08),
 ('2017-01-22', 0.16),
 ('2017-01-22', 0.01),
 ('2017-01-22', 0.04),
 ('2017-01-22', 0.09),
 ('2017-01-22', 0.72),
 ('2017-01-23', 0.0),
 ('2017-01-23', 0.08),
 ('2017-01-23', None),
 ('2017-01-23', None),
 ('2017-01-23', 0.0),
 ('2017-01-23', 0.01),
 ('2017-01-23', 0.85),
 ('2017-01-24', 0.04),
 ('2017-01-24', 0.15),
 ('2017-01-24', None),
 ('2017-01-24', 0.08),
 ('2017-01-24', 0.13),
 ('2017-01-24', 1.85),
 ('2017-01-25', 0.03),
 ('2017-01-25', 0.12),
 ('2017-01-25', None),
 ('2017-01-25', None),
 ('2017-01-25', 0.0),
 ('2017-01-25', 0.79),
 ('2017-01-25', 2.64),
 ('2017-01-26', 0.0),
 ('2017-01-26', 0.0),
 ('2017-01-26', 0.01),
 ('2017-01-26', 0.0),
 ('2017-01-26', 0.0),
 ('2017-01-26', 0.0),
 ('2017-01-26', 0.1),
 ('2017-01-27', 0.0),
 ('2017-01-27', 0.0),
 ('2017-01-27', 0.0),
 ('2017-01-27', 0.0),
 ('2017-01-27', 0.0),
 ('2017-01-27', 0.03),
 ('2017-01-27', 0.03),
 ('2017-01-28', 0.0),
 ('2017-01-28', 0.14),
 ('2017-01-28', 0.0),
 ('2017-01-28', 0.0),
 ('2017-01-28', 0.0),
 ('2017-01-29', 0.18),
 ('2017-01-29', 0.0),
 ...]

# Save the query results as a Pandas DataFrame and set the index to the date column
yr_precip_df = pd.DataFrame(data=yr_precip)
yr_precip_df.head(15)
# Save the query results as a Pandas DataFrame and set the index to the date column
yr_precip_df = pd.DataFrame(data=yr_precip)
yr_precip_df.head(15)
date	prcp
0	2016-08-24	0.08
1	2016-08-24	2.15
2	2016-08-24	2.28
3	2016-08-24	NaN
4	2016-08-24	1.22
5	2016-08-24	2.15
6	2016-08-24	1.45
7	2016-08-25	0.08
8	2016-08-25	0.08
9	2016-08-25	0.00
10	2016-08-25	0.00
11	2016-08-25	0.21
12	2016-08-25	0.06
13	2016-08-25	0.11
14	2016-08-26	0.00

# Sort the dataframe by date
yr_precip_df = yr_precip_df.set_index("date")
yr_precip_df.head(15)
# Sort the dataframe by date
yr_precip_df = yr_precip_df.set_index("date")
yr_precip_df.head(15)
prcp
date	
2016-08-24	0.08
2016-08-24	2.15
2016-08-24	2.28
2016-08-24	NaN
2016-08-24	1.22
2016-08-24	2.15
2016-08-24	1.45
2016-08-25	0.08
2016-08-25	0.08
2016-08-25	0.00
2016-08-25	0.00
2016-08-25	0.21
2016-08-25	0.06
2016-08-25	0.11
2016-08-26	0.00

# Use Pandas Plotting with Matplotlib to plot the data
df=pd.DataFrame(data=yr_precip)
plt.figure(figsize = (12,6))
plt.plot(df['date'], df['prcp'])
plt.title("Precipitation in Hawaii")
plt.xlabel('Date')
plt.ylabel('Rainfall (Inches)')
plt.legend(['Percipitation'])
plt.tight_layout()
plt.show()
# Use Pandas Plotting with Matplotlib to plot the data
df=pd.DataFrame(data=yr_precip)
plt.figure(figsize = (12,6))
plt.plot(df['date'], df['prcp'])
plt.title("Precipitation in Hawaii")
plt.xlabel('Date')
plt.ylabel('Rainfall (Inches)')
plt.legend(['Percipitation'])
plt.tight_layout()
plt.show()
​

precipitation


# Use Pandas to calcualte the summary statistics for the precipitation data
yr_precip_df.describe()
# Use Pandas to calcualte the summary statistics for the precipitation data
yr_precip_df.describe()
prcp
count	2015.000000
mean	0.176462
std	0.460288
min	0.000000
25%	0.000000
50%	0.020000
75%	0.130000
max	6.700000
describe


session.query(func.count(Station.station)).all()
# Design a query to show how many stations are available in this dataset?
session.query(func.count(Station.station)).all()
[(9)]

session.query(Measurement.station,func.count(Measurement.station)).\
        group_by(Measurement.station).order_by(func.count(Measurement.station).desc()).all()
# What are the most active stations? (i.e. what stations have the most rows)?
# List the stations and the counts in descending order.
session.query(Measurement.station,func.count(Measurement.station)).\
        group_by(Measurement.station).order_by(func.count(Measurement.station).desc()).all()
[('USC00519281', 2772),
 ('USC00519397', 2724),
 ('USC00513117', 2709),
 ('USC00519523', 2669),
 ('USC00516128', 2612),
 ('USC00514830', 2202),
 ('USC00511918', 1979),
 ('USC00517948', 1372),
 ('USC00518838', 511)]

sel = [func.min(Measurement.tobs),
       func.max(Measurement.tobs),
       func.avg(Measurement.tobs)]
                
session.query(*sel).filter(Measurement.station=='USC00519281').all()
# Using the station id from the previous query, calculate the lowest temperature recorded, 
# highest temperature recorded, and average temperature most active station?
sel = [func.min(Measurement.tobs),
       func.max(Measurement.tobs),
       func.avg(Measurement.tobs)]
                
session.query(*sel).filter(Measurement.station=='USC00519281').all()
[(54.0, 85.0, 71.66378066378067)]

histogram = session.query(Measurement.tobs).\
                                filter(Measurement.station=='USC00519281').\
                                filter(Measurement.date >= one_year_ago).\
                                order_by(Measurement.date.desc()).all()

x = [x[0] for x in histogram]


plt.hist(x, bins=12)
plt.ylabel('Frequency')
plt.legend(['tobs'])
plt.show()
#plt.savefig("Images/Station-Histogram.png")
# Choose the station with the highest number of temperature observations.
# Query the last 12 months of temperature observation data for this station and plot the results as a histogram
histogram = session.query(Measurement.tobs).\
                                filter(Measurement.station=='USC00519281').\
                                filter(Measurement.date >= one_year_ago).\
                                order_by(Measurement.date.desc()).all()
​
x = [x[0] for x in histogram]
​
​
plt.hist(x, bins=12)
plt.ylabel('Frequency')
plt.legend(['tobs'])
plt.show()
#plt.savefig("Images/Station-Histogram.png")

precipitation


# This function called `calc_temps` will accept start date and end date in the format '%Y-%m-%d' 
# and return the minimum, average, and maximum temperatures for that range of dates
def calc_temps(start_date, end_date):
    """TMIN, TAVG, and TMAX for a list of dates.
    
    Args:
        start_date (string): A date string in the format %Y-%m-%d
        end_date (string): A date string in the format %Y-%m-%d
        
    Returns:
        TMIN, TAVE, and TMAX
    """
    
    return session.query(func.min(Measurement.tobs), func.avg(Measurement.tobs), func.max(Measurement.tobs)).\
        filter(Measurement.date >= start_date).filter(Measurement.date <= end_date).all()
​
# function usage example
print(calc_temps('2012-02-28', '2012-03-05'))
[(62.0, 69.57142857142857, 74.0)]

temps = calc_temps('2017-01-21', '2017-01-28')
temps
# Use your previous function `calc_temps` to calculate the tmin, tavg, and tmax 
# for your trip using the previous year's data for those same dates.
temps = calc_temps('2017-01-21', '2017-01-28')
temps
[(63.0, 70.58, 77.0)]

lower = temps[0][1] - temps[0][0]
upper = temps[0][2] - temps[0][1]

plt.figure(figsize=(3,6))
plt.bar(0, temps[0][1], yerr=[upper-lower], color='salmon', alpha=0.5)
plt.title('Trip Avg Temp')
plt.xticks([])
plt.ylabel('Temp (F)')
plt.ylim(60)

plt.show()
# Plot the results from your previous query as a bar chart. 
# Use "Trip Avg Temp" as your Title
# Use the average temperature for the y value
# Use the peak-to-peak (tmax-tmin) value as the y error bar (yerr)
lower = temps[0][1] - temps[0][0]
upper = temps[0][2] - temps[0][1]
​
plt.figure(figsize=(3,6))
plt.bar(0, temps[0][1], yerr=[upper-lower], color='salmon', alpha=0.5)
plt.title('Trip Avg Temp')
plt.xticks([])
plt.ylabel('Temp (F)')
plt.ylim(60)
​
plt.show()


def rainfall(start_date, end_date):
    return session.query(Measurement.station,
                         Station.name,
                         Measurement.prcp.label('rainfall'),
                         Station.latitude,
                         Station.longitude,
                         Station.elevation).\
                            group_by(Measurement.station).\
                            join(Station, Measurement.station == Station.station).\
                            filter(Measurement.date >= start_date).\
                            filter(Measurement.date <= end_date).\
                            order_by('rainfall desc').all()

rainfall('2017-01-21', '2017-01-28')
# Calculate the rainfall per weather station for your trip dates using the previous year's matching dates.
# Sort this in descending order by precipitation amount and list the station, name, latitude, longitude, and elevation
def rainfall(start_date, end_date):
    return session.query(Measurement.station,
                         Station.name,
                         Measurement.prcp.label('rainfall'),
                         Station.latitude,
                         Station.longitude,
                         Station.elevation).\
                            group_by(Measurement.station).\
                            join(Station, Measurement.station == Station.station).\
                            filter(Measurement.date >= start_date).\
                            filter(Measurement.date <= end_date).\
                            order_by('rainfall desc').all()
​
rainfall('2017-01-21', '2017-01-28')
C:\Users\39319362\AppData\Local\Continuum\anaconda3\lib\site-packages\sqlalchemy\sql\compiler.py:643: SAWarning: Can't resolve label reference 'rainfall desc'; converting to text() (this warning may be suppressed after 10 occurrences)
  util.ellipses_string(element.element))
[('USC00513117', 'KANEOHE 838.1, HI US', 0.14, 21.4234, -157.8015, 14.6),
 ('USC00514830',
  'KUALOA RANCH HEADQUARTERS 886.9, HI US',
  0.0,
  21.5213,
  -157.8374,
  7.0),
 ('USC00516128',
  'MANOA LYON ARBO 785.2, HI US',
  0.0,
  21.3331,
  -157.8025,
  152.4),
 ('USC00517948', 'PEARL CITY, HI US', 0.0, 21.3934, -157.9751, 11.9),
 ('USC00519281',
  'WAIHEE 837.5, HI US',
  0.0,
  21.45167,
  -157.84888999999998,
  32.9),
 ('USC00519397', 'WAIKIKI 717.2, HI US', 0.0, 21.2716, -157.8168, 3.0),
 ('USC00519523',
  'WAIMANALO EXPERIMENTAL FARM, HI US',
  0.0,
  21.33556,
  -157.71139,
  19.5)]
